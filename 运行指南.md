# MERI é¡¹ç›®è¿è¡ŒæŒ‡å—

## æ–¹å¼ä¸€ï¼šWeb æ¼”ç¤ºåº”ç”¨ï¼ˆæ¨èï¼Œæœ€ç®€å•ï¼‰

### æ­¥éª¤ 1: ç¯å¢ƒå‡†å¤‡

1. **å®‰è£… Python 3.11 æˆ– 3.12**
   - ç¡®ä¿å·²å®‰è£… Python 3.11 æˆ– 3.12
   - æ£€æŸ¥ï¼š`python --version` æˆ– `python3 --version`

2. **å®‰è£… Poetry**
   - Windows: `(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | python -`
   - æˆ–è®¿é—®ï¼šhttps://python-poetry.org/docs/#installation
   - æ£€æŸ¥ï¼š`poetry --version`

### æ­¥éª¤ 2: å®‰è£…é¡¹ç›®ä¾èµ–

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd MERI-main

# å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼‰
poetry install
```

### æ­¥éª¤ 3: é…ç½® API å¯†é’¥

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

**é€‰é¡¹ A: ä½¿ç”¨ OpenAI APIï¼ˆæ¨èæ–°æ‰‹ï¼‰**
```env
OPENAI_API_KEY=sk-your-openai-api-key-here
```

**é€‰é¡¹ B: ä½¿ç”¨ Azure API**
```env
AZURE_API_KEY=your-azure-api-key-here
AZURE_API_BASE=https://your-resource-name.openai.azure.com/
```

> ğŸ’¡ **è·å– API å¯†é’¥**ï¼š
> - OpenAI: https://platform.openai.com/api-keys
> - Azure: åœ¨ Azure Portal ä¸­åˆ›å»º OpenAI èµ„æº

### æ­¥éª¤ 4: è¿è¡Œ Web æ¼”ç¤º

```bash
# ä½¿ç”¨ OpenAI æ¨¡å‹ï¼ˆé»˜è®¤ gpt-4o-miniï¼Œè¾ƒä¾¿å®œï¼‰
poetry run python app/app.py --model gpt-4o-mini

# æˆ–ä½¿ç”¨ Azure æ¨¡å‹
poetry run python app/app.py --model azure/gpt-4o
```

### æ­¥éª¤ 5: è®¿é—® Web ç•Œé¢

1. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:5010`
2. ä¸Šä¼ ç¤ºä¾‹æ–‡ä»¶ï¼š
   - PDF: `data/demo_data/Alfa Laval LKH.pdf`
   - Schema: `data/demo_data/dummy_schema.json`
3. ç‚¹å‡» "To Intermediate" ç”Ÿæˆä¸­é—´æ ¼å¼
4. ç‚¹å‡» "Extract Parameters" æå–å‚æ•°
5. æŸ¥çœ‹ç»“æœï¼

---

## æ–¹å¼äºŒï¼šPython ä»£ç ç›´æ¥è¿è¡Œ

### æ­¥éª¤ 1-3: åŒæ–¹å¼ä¸€ï¼ˆç¯å¢ƒå‡†å¤‡ã€å®‰è£…ä¾èµ–ã€é…ç½® APIï¼‰

### æ­¥éª¤ 4: åˆ›å»ºæµ‹è¯•è„šæœ¬

åˆ›å»ºæ–‡ä»¶ `test_meri.py`ï¼š

```python
from meri import MERI
import json
import os

# ä½¿ç”¨ç¤ºä¾‹æ•°æ®
base_path = os.path.dirname(os.path.abspath(__file__))
pdf_path = os.path.join(base_path, 'data', 'demo_data', 'Alfa Laval LKH.pdf')
schema_path = os.path.join(base_path, 'data', 'demo_data', 'dummy_schema.json')

# åŠ è½½ JSON Schema
with open(schema_path, 'r', encoding='utf-8') as f:
    schema = json.load(f)

# åˆ›å»º MERI å®ä¾‹
print("æ­£åœ¨åˆå§‹åŒ– MERI...")
meri = MERI(
    pdf_path=pdf_path,
    model='gpt-4o-mini',  # æˆ– 'azure/gpt-4o'
    model_temp=0.0
)

# è½¬æ¢ä¸ºä¸­é—´æ ¼å¼
print("æ­£åœ¨è½¬æ¢ä¸ºä¸­é—´æ ¼å¼...")
meri.to_intermediate()
print("ä¸­é—´æ ¼å¼è½¬æ¢å®Œæˆï¼")

# å¯è§†åŒ–å¸ƒå±€ï¼ˆå¯é€‰ï¼‰
print("æ­£åœ¨ç”Ÿæˆå¸ƒå±€å¯è§†åŒ–...")
layout_images = meri.vis_layout()
print(f"ç”Ÿæˆäº† {len(layout_images)} é¡µçš„å¸ƒå±€å¯è§†åŒ–")

# æå–å‚æ•°
print("æ­£åœ¨æå–å‚æ•°ï¼ˆè¿™å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œå–å†³äºæ–‡æ¡£å¤§å°ï¼‰...")
populated_schema = meri.run(json.dumps(schema))

# æ˜¾ç¤ºç»“æœ
print("\n" + "="*50)
print("æå–ç»“æœï¼š")
print("="*50)
print(json.dumps(populated_schema, indent=2, ensure_ascii=False))
```

### æ­¥éª¤ 5: è¿è¡Œè„šæœ¬

```bash
poetry run python test_meri.py
```

---

## æ–¹å¼ä¸‰ï¼šä½¿ç”¨ Jupyter Notebook

### æ­¥éª¤ 1-3: åŒæ–¹å¼ä¸€

### æ­¥éª¤ 4: å¯åŠ¨ Jupyter

```bash
poetry run jupyter notebook
```

### æ­¥éª¤ 5: æ‰“å¼€ç¤ºä¾‹ Notebook

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š`docs/notebooks/example.ipynb`

æŒ‰ç…§ notebook ä¸­çš„å•å…ƒæ ¼é¡ºåºæ‰§è¡Œå³å¯ã€‚

---

## å¸¸è§é—®é¢˜æ’æŸ¥

### 1. Poetry å®‰è£…å¤±è´¥
- ç¡®ä¿ Python ç‰ˆæœ¬æ­£ç¡®ï¼ˆ3.11 æˆ– 3.12ï¼‰
- å°è¯•ï¼š`pip install poetry`

### 2. API å¯†é’¥é”™è¯¯
- æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦åœ¨é¡¹ç›®æ ¹ç›®å½•
- æ£€æŸ¥ API å¯†é’¥æ˜¯å¦æ­£ç¡®ï¼ˆæ²¡æœ‰å¤šä½™ç©ºæ ¼ï¼‰
- ç¡®ä¿æœ‰è¶³å¤Ÿçš„ API é¢åº¦

### 3. ä¾èµ–å®‰è£…æ…¢
- ä½¿ç”¨å›½å†…é•œåƒæºï¼ˆå¦‚æœåœ¨ä¸­å›½ï¼‰
- æˆ–ä½¿ç”¨ Docker æ–¹å¼è¿è¡Œ

### 4. ç«¯å£ 5010 è¢«å ç”¨
- ä¿®æ”¹ `app/app.py` æœ€åä¸€è¡Œçš„ç«¯å£å·
- æˆ–å…³é—­å ç”¨ç«¯å£çš„ç¨‹åº

### 5. PDF å¤„ç†å¤±è´¥
- ç¡®ä¿ PDF æ–‡ä»¶æ²¡æœ‰æŸå
- å°è¯•å¯ç”¨ OCRï¼š`MERI(pdf_path, do_ocr=True)`

---

## å¿«é€Ÿæµ‹è¯•å‘½ä»¤

```bash
# 1. æ£€æŸ¥ç¯å¢ƒ
poetry --version
python --version

# 2. å®‰è£…ä¾èµ–
poetry install

# 3. è¿è¡Œ Web æ¼”ç¤º
poetry run python app/app.py --model gpt-4o-mini
```

---

## é¢„æœŸæ•ˆæœ

è¿è¡ŒæˆåŠŸåï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°ï¼š

1. **ä¸­é—´æ ¼å¼**ï¼šPDF è¢«è½¬æ¢ä¸ºç»“æ„åŒ–çš„ HTML æ ¼å¼ï¼ŒåŒ…å«æ–‡æœ¬ã€è¡¨æ ¼ã€å›¾ç‰‡ç­‰å…ƒç´ 
2. **å¸ƒå±€å¯è§†åŒ–**ï¼šæ˜¾ç¤º PDF ä¸­æ£€æµ‹åˆ°çš„å„ç§å…ƒç´ ï¼ˆæ ‡é¢˜ã€æ®µè½ã€è¡¨æ ¼ã€å›¾ç‰‡ç­‰ï¼‰
3. **æå–çš„å‚æ•°**ï¼šæ ¹æ® JSON Schema ä»æ–‡æ¡£ä¸­æå–çš„ç»“æ„åŒ–æ•°æ®

ç¤ºä¾‹è¾“å‡ºä¼šåŒ…å«ï¼š
- æ–‡æ¡£æ ‡é¢˜
- æŠ€æœ¯è§„æ ¼å‚æ•°ï¼ˆå¦‚æ¸©åº¦èŒƒå›´ã€å‹åŠ›ç­‰ï¼‰
- æ¯ä¸ªå‚æ•°çš„å€¼ã€å•ä½ã€ä½ç½®ä¿¡æ¯ç­‰

---

## ä¸‹ä¸€æ­¥

- å°è¯•ä½¿ç”¨è‡ªå·±çš„ PDF æ–‡ä»¶
- ä¿®æ”¹ JSON Schema æ¥æå–ä¸åŒçš„å‚æ•°
- æŸ¥çœ‹ `docs/notebooks/example.ipynb` äº†è§£æ›´å¤šç”¨æ³•
- é˜…è¯»ä»£ç äº†è§£å®ç°ç»†èŠ‚




